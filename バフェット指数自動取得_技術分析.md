# ãƒãƒ•ã‚§ãƒƒãƒˆæŒ‡æ•°è‡ªå‹•å–å¾— - æŠ€è¡“åˆ†æã¨å®Ÿè£…

## ğŸ” èª¿æŸ»çµæœ

### ã‚µã‚¤ãƒˆæ§‹é€ åˆ†æ

| é …ç›® | æ—¥æœ¬ç‰ˆ | ç±³å›½ç‰ˆ |
|------|--------|--------|
| **URL** | https://nikkeiyosoku.com/buffett/ | https://nikkeiyosoku.com/buffett_us/ |
| **è¡¨ç¤ºå½¢å¼** | "184.00+1.00(0.55%)" | "222.78+1.75(0.79%)" |
| **ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹** | flux-cdn.com (JavaScript) | flux-cdn.com (JavaScript) |
| **é™çš„HTML** | âŒ ä¸å¯ | âŒ ä¸å¯ |
| **JSå¿…é ˆ** | âœ… å¿…é ˆ | âœ… å¿…é ˆ |

### robots.txtç¢ºèª

```
User-agent: *
Disallow: /blog/wp-admin/

User-agent: ChatGPT-User
Disallow: /

Sitemap: https://nikkeiyosoku.com/sitemap.xml
```

**è§£é‡ˆ**:
- âœ… ä¸€èˆ¬çš„ãªãƒœãƒƒãƒˆï¼š`/blog/wp-admin/`ä»¥å¤–ã¯**ã‚¢ã‚¯ã‚»ã‚¹è¨±å¯**
- âŒ ChatGPT-Userï¼šå…¨ãƒšãƒ¼ã‚¸**ç¦æ­¢**
- âœ… Playwright/Seleniumï¼š**æŠ€è¡“çš„ã«ã¯å¯èƒ½**

---

## âš–ï¸ å€«ç†çš„ãƒ»æ³•çš„è€ƒæ…®

### è¨±å®¹ã•ã‚Œã‚‹æ¡ä»¶

| é …ç›® | è©•ä¾¡ | ç†ç”± |
|------|------|------|
| **robots.txt** | âœ… è¨±å¯ | `/buffett/`ã¯æ˜ç¤ºçš„ã«ç¦æ­¢ã•ã‚Œã¦ã„ãªã„ |
| **ã‚¢ã‚¯ã‚»ã‚¹é »åº¦** | âœ… è¨±å®¹ | æœˆ1å›ï¼ˆæœˆ14æ—¥ã®ã¿ï¼‰ |
| **ã‚µãƒ¼ãƒãƒ¼è² è·** | âœ… è»½å¾® | 1ãƒšãƒ¼ã‚¸ãƒ»1ç§’ä»¥å†…ã§å®Œäº† |
| **å•†ç”¨åˆ©ç”¨** | âš ï¸ è¦æ³¨æ„ | å€‹äººåˆ©ç”¨ã®ã¿æ¨å¥¨ |

### æ¨å¥¨å®Ÿè£…æ–¹é‡

```
å„ªå…ˆåº¦1: æ‰‹å‹•å…¥åŠ›ï¼ˆæœ€ã‚‚å®‰å…¨ãƒ»ç¢ºå®Ÿï¼‰
å„ªå…ˆåº¦2: Playwrightè‡ªå‹•å–å¾—ï¼ˆæœˆ1å›ã€ä½è² è·ï¼‰
å„ªå…ˆåº¦3: FRED APIã§è‡ªå‰è¨ˆç®—ï¼ˆç²¾åº¦ã‚„ã‚„åŠ£ã‚‹ï¼‰
```

---

## ğŸ’» å®Ÿè£…æ–¹æ³•

### æ–¹æ³•1: æ‰‹å‹•å…¥åŠ›ï¼ˆæ¨å¥¨ï¼‰âœ…

**æ‰€è¦æ™‚é–“**: 1åˆ†/æœˆ

```python
# plan_c_app.pyï¼ˆStreamlitï¼‰

import streamlit as st

st.subheader("ğŸ“ ãƒãƒ•ã‚§ãƒƒãƒˆæŒ‡æ•°ï¼ˆæ‰‹å‹•å…¥åŠ›ï¼‰")

col1, col2 = st.columns(2)
with col1:
    buffett_jp = st.number_input(
        "æ—¥æœ¬ãƒãƒ•ã‚§ãƒƒãƒˆæŒ‡æ•°ï¼ˆ%ï¼‰", 
        min_value=0.0,
        max_value=300.0,
        value=120.0,
        help="https://nikkeiyosoku.com/buffett/"
    )
    st.link_button("ğŸ“Š æ—¥æœ¬ç‰ˆã‚’é–‹ã", "https://nikkeiyosoku.com/buffett/")

with col2:
    buffett_us = st.number_input(
        "ç±³å›½ãƒãƒ•ã‚§ãƒƒãƒˆæŒ‡æ•°ï¼ˆ%ï¼‰", 
        min_value=0.0,
        max_value=300.0,
        value=180.0,
        help="https://nikkeiyosoku.com/buffett_us/"
    )
    st.link_button("ğŸ“Š ç±³å›½ç‰ˆã‚’é–‹ã", "https://nikkeiyosoku.com/buffett_us/")

buffett_avg = (buffett_jp + buffett_us) / 2
st.metric("å¹³å‡", f"{buffett_avg:.1f}%", "âœ… <80%" if buffett_avg < 80 else "âŒ â‰§80%")
```

**ãƒ¡ãƒªãƒƒãƒˆ**:
- 100%ç¢ºå®Ÿ
- ã‚µã‚¤ãƒˆæ§‹é€ å¤‰æ›´ã«å½±éŸ¿ã•ã‚Œãªã„
- æœ€æ–°ãƒ‡ãƒ¼ã‚¿ï¼ˆãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ï¼‰
- å€«ç†çš„ã«å®‰å…¨

---

### æ–¹æ³•2: Playwrightè‡ªå‹•å–å¾—ï¼ˆå®Œå…¨è‡ªå‹•åŒ–ï¼‰âš ï¸

**æ‰€è¦æ™‚é–“**: åˆå›å®Ÿè£…3æ™‚é–“ã€ä»¥é™å®Œå…¨è‡ªå‹•

#### ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
pip install playwright beautifulsoup4
playwright install chromium
```

#### å®Ÿè£…ã‚³ãƒ¼ãƒ‰

```python
# buffett_scraper.py

from playwright.sync_api import sync_playwright
import re
from datetime import datetime

def get_buffett_index(url, country="Japan"):
    """
    nikkeiyosoku.comã‹ã‚‰ãƒãƒ•ã‚§ãƒƒãƒˆæŒ‡æ•°ã‚’å–å¾—
    
    Args:
        url: ãƒãƒ•ã‚§ãƒƒãƒˆæŒ‡æ•°ãƒšãƒ¼ã‚¸ã®URL
        country: "Japan" or "US"
    
    Returns:
        float: ãƒãƒ•ã‚§ãƒƒãƒˆæŒ‡æ•°ï¼ˆ%ï¼‰
    """
    with sync_playwright() as p:
        # ãƒ˜ãƒƒãƒ‰ãƒ¬ã‚¹ãƒ–ãƒ©ã‚¦ã‚¶èµ·å‹•
        browser = p.chromium.launch(headless=True)
        page = browser.new_page()
        
        # ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿ï¼ˆJavaScriptã®å®Ÿè¡Œã‚’å¾…ã¤ï¼‰
        page.goto(url, wait_until="networkidle")
        
        # ãƒšãƒ¼ã‚¸å†…å®¹ã‚’å–å¾—
        content = page.content()
        
        # ãƒãƒ•ã‚§ãƒƒãƒˆæŒ‡æ•°ã®æ•°å€¤ã‚’æ­£è¦è¡¨ç¾ã§æŠ½å‡º
        # å½¢å¼: "ãƒãƒ•ã‚§ãƒƒãƒˆæŒ‡æ•°(10/24) 184.00+1.00(0.55%)"
        pattern = r'ãƒãƒ•ã‚§ãƒƒãƒˆæŒ‡æ•°\([^)]+\)\s*([\d.]+)'
        match = re.search(pattern, content)
        
        browser.close()
        
        if match:
            value = float(match.group(1))
            print(f"{country} ãƒãƒ•ã‚§ãƒƒãƒˆæŒ‡æ•°: {value}%")
            return value
        else:
            raise ValueError(f"Failed to extract Buffett Index from {url}")

def get_both_indices():
    """æ—¥æœ¬ç‰ˆã¨ç±³å›½ç‰ˆã®ä¸¡æ–¹ã‚’å–å¾—"""
    jp_url = "https://nikkeiyosoku.com/buffett/"
    us_url = "https://nikkeiyosoku.com/buffett_us/"
    
    print(f"å–å¾—é–‹å§‹: {datetime.now()}")
    
    jp_value = get_buffett_index(jp_url, "Japan")
    us_value = get_buffett_index(us_url, "US")
    
    avg_value = (jp_value + us_value) / 2
    
    print(f"å¹³å‡: {avg_value:.2f}%")
    print(f"å–å¾—å®Œäº†: {datetime.now()}")
    
    return {
        "japan": jp_value,
        "us": us_value,
        "average": avg_value
    }

if __name__ == "__main__":
    result = get_both_indices()
    print(f"\nçµæœ: {result}")
```

#### Streamlitã‚¢ãƒ—ãƒªã«çµ±åˆ

```python
# plan_c_app.pyï¼ˆè‡ªå‹•å–å¾—ç‰ˆï¼‰

import streamlit as st
from buffett_scraper import get_both_indices

st.subheader("ğŸ“Š ãƒãƒ•ã‚§ãƒƒãƒˆæŒ‡æ•°ï¼ˆè‡ªå‹•å–å¾—ï¼‰")

if st.button("ğŸ”„ æœ€æ–°ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—"):
    with st.spinner("å–å¾—ä¸­..."):
        try:
            result = get_both_indices()
            
            col1, col2, col3 = st.columns(3)
            with col1:
                st.metric("æ—¥æœ¬", f"{result['japan']:.1f}%")
            with col2:
                st.metric("ç±³å›½", f"{result['us']:.1f}%")
            with col3:
                st.metric("å¹³å‡", f"{result['average']:.1f}%", 
                         "âœ…" if result['average'] < 80 else "âŒ")
            
            st.success("å–å¾—å®Œäº†")
        except Exception as e:
            st.error(f"å–å¾—å¤±æ•—: {e}")
            st.info("æ‰‹å‹•ã§å…¥åŠ›ã—ã¦ãã ã•ã„")
```

#### è‡ªå‹•å®Ÿè¡Œï¼ˆGitHub Actionsï¼‰

```yaml
# .github/workflows/monthly_check.yml

name: Plan C Monthly Check

on:
  schedule:
    - cron: '0 1 14 * *'  # æ¯æœˆ14æ—¥ 10:00 JST
  workflow_dispatch:

jobs:
  check:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      
      - name: Setup Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.11'
      
      - name: Install dependencies
        run: |
          pip install playwright yfinance
          playwright install chromium
      
      - name: Run crash detection
        run: |
          python scripts/auto_check_with_buffett.py
```

---

### æ–¹æ³•3: FRED APIã§è‡ªå‰è¨ˆç®—ï¼ˆä»£æ›¿æ¡ˆï¼‰

**æ‰€è¦æ™‚é–“**: åˆå›å®Ÿè£…2æ™‚é–“ã€ä»¥é™å®Œå…¨è‡ªå‹•

#### æ¦‚å¿µ

```
ãƒãƒ•ã‚§ãƒƒãƒˆæŒ‡æ•° = (æ ªå¼æ™‚ä¾¡ç·é¡ Ã· GDP) Ã— 100
```

#### å®Ÿè£…

```python
# buffett_calculator.py

import pandas_datareader.data as web
from datetime import datetime, timedelta

def calculate_buffett_index(country="US"):
    """
    FRED APIã§ãƒãƒ•ã‚§ãƒƒãƒˆæŒ‡æ•°ã‚’è¨ˆç®—
    
    Args:
        country: "US" or "JP"
    
    Returns:
        float: ãƒãƒ•ã‚§ãƒƒãƒˆæŒ‡æ•°ï¼ˆ%ï¼‰
    """
    end = datetime.now()
    start = end - timedelta(days=365)
    
    if country == "US":
        # ç±³å›½ç‰ˆï¼šDDDM01USA156NWDB (World Bank)
        ticker = "DDDM01USA156NWDB"
    elif country == "JP":
        # æ—¥æœ¬ç‰ˆï¼šDDDM01JPA156NWDB (World Bank)
        ticker = "DDDM01JPA156NWDB"
    else:
        raise ValueError("Country must be 'US' or 'JP'")
    
    # FRED APIã§ãƒ‡ãƒ¼ã‚¿å–å¾—
    df = web.DataReader(ticker, 'fred', start, end)
    
    # æœ€æ–°å€¤ã‚’å–å¾—
    latest_value = df.iloc[-1].values[0]
    
    return latest_value

# ä½¿ç”¨ä¾‹
if __name__ == "__main__":
    us_buffett = calculate_buffett_index("US")
    jp_buffett = calculate_buffett_index("JP")
    
    print(f"ç±³å›½ãƒãƒ•ã‚§ãƒƒãƒˆæŒ‡æ•°: {us_buffett:.2f}%")
    print(f"æ—¥æœ¬ãƒãƒ•ã‚§ãƒƒãƒˆæŒ‡æ•°: {jp_buffett:.2f}%")
    print(f"å¹³å‡: {(us_buffett + jp_buffett) / 2:.2f}%")
```

#### å•é¡Œç‚¹

| é …ç›® | çŠ¶æ…‹ | è©³ç´° |
|------|------|------|
| **ãƒ‡ãƒ¼ã‚¿æ›´æ–°é »åº¦** | âŒ å››åŠæœŸã”ã¨ | æœˆæ¬¡ãƒ‡ãƒ¼ã‚¿ãªã— |
| **æœ€æ–°ãƒ‡ãƒ¼ã‚¿** | âŒ 2020å¹´ã¾ã§ | 5å¹´é…ã‚Œ |
| **ç²¾åº¦** | âš ï¸ ä¸æ˜ | nikkeiyosokuã¨è¨ˆç®—æ–¹æ³•ãŒç•°ãªã‚‹å¯èƒ½æ€§ |

**çµè«–**: Phase 3ã¯**éæ¨å¥¨**ï¼ˆãƒ‡ãƒ¼ã‚¿ãŒå¤ã™ãã‚‹ï¼‰

---

## ğŸ“Š 3æ–¹å¼ã®æ¯”è¼ƒ

| æ–¹å¼ | ç¢ºå®Ÿæ€§ | æœ€æ–°æ€§ | è‡ªå‹•åŒ– | å®Ÿè£…æ™‚é–“ | ãƒªã‚¹ã‚¯ |
|------|--------|--------|--------|---------|-------|
| **1. æ‰‹å‹•å…¥åŠ›** âœ… | 100% | 100% | 0% | 0åˆ† | ãªã— |
| **2. Playwright** | 95% | 100% | 100% | 3æ™‚é–“ | ä½ï¼ˆæ§‹é€ å¤‰æ›´ï¼‰ |
| **3. FRED API** | 80% | 0% | 100% | 2æ™‚é–“ | é«˜ï¼ˆ5å¹´é…ã‚Œï¼‰ |

---

## ğŸ¯ æ¨å¥¨å®Ÿè£…ãƒ—ãƒ©ãƒ³

### æ®µéšçš„ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ

#### Phase 1: æ‰‹å‹•å…¥åŠ›ã§ã‚¹ã‚¿ãƒ¼ãƒˆï¼ˆä»Šã™ãï¼‰

```
å®Ÿè£…æ™‚é–“: 0åˆ†
ä½œæ¥­æ™‚é–“: 1åˆ†/æœˆ
ç¢ºå®Ÿæ€§: 100%
```

**ç†ç”±**:
- ä»Šæ—¥ã‹ã‚‰ä½¿ãˆã‚‹
- 100%ç¢ºå®Ÿ
- å€«ç†çš„ã«å®‰å…¨

---

#### Phase 2: Playwrightè‡ªå‹•åŒ–ï¼ˆ3ãƒ¶æœˆå¾Œï¼‰

```
å®Ÿè£…æ™‚é–“: 3æ™‚é–“
ä½œæ¥­æ™‚é–“: 0åˆ†/æœˆ
ç¢ºå®Ÿæ€§: 95%
```

**ã‚¿ã‚¤ãƒŸãƒ³ã‚°**: æ‰‹å‹•å…¥åŠ›ã«æ…£ã‚ŒãŸå¾Œã€è‡ªå‹•åŒ–ã‚’æ¤œè¨

**æ¡ä»¶**:
- æœˆ1å›ã®ã‚¢ã‚¯ã‚»ã‚¹ï¼ˆä½è² è·ï¼‰
- ã‚¨ãƒ©ãƒ¼æ™‚ã¯æ‰‹å‹•å…¥åŠ›ã«ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
- User-Agentã‚’é©åˆ‡ã«è¨­å®š

---

## ğŸ’» å®Œå…¨å®Ÿè£…ä¾‹ï¼ˆPhase 2ï¼‰

### ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹æˆ

```
plan-c-app/
â”œâ”€â”€ plan_c_app.py           # Streamlitãƒ¡ã‚¤ãƒ³ã‚¢ãƒ—ãƒª
â”œâ”€â”€ buffett_scraper.py      # Playwrightè‡ªå‹•å–å¾—
â”œâ”€â”€ requirements.txt        # ä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸
â””â”€â”€ .github/
    â””â”€â”€ workflows/
        â””â”€â”€ monthly_check.yml  # GitHub Actions
```

### requirements.txt

```
streamlit==1.31.0
yfinance==0.2.36
pandas==2.2.0
playwright==1.41.0
```

### ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

```python
# plan_c_app.pyï¼ˆå®Œå…¨ç‰ˆï¼‰

import streamlit as st
from buffett_scraper import get_both_indices

st.subheader("ğŸ“Š ãƒãƒ•ã‚§ãƒƒãƒˆæŒ‡æ•°")

# è‡ªå‹•å–å¾—ã‚’è©¦ã¿ã‚‹
auto_mode = st.checkbox("è‡ªå‹•å–å¾—ã‚’è©¦ã™ï¼ˆå¤±æ•—æ™‚ã¯æ‰‹å‹•å…¥åŠ›ï¼‰", value=False)

if auto_mode:
    if st.button("ğŸ”„ å–å¾—"):
        with st.spinner("å–å¾—ä¸­..."):
            try:
                result = get_both_indices()
                buffett_jp = result['japan']
                buffett_us = result['us']
                st.success("âœ… è‡ªå‹•å–å¾—æˆåŠŸ")
            except Exception as e:
                st.error(f"âŒ è‡ªå‹•å–å¾—å¤±æ•—: {e}")
                st.info("ğŸ‘‡ æ‰‹å‹•ã§å…¥åŠ›ã—ã¦ãã ã•ã„")
                auto_mode = False

if not auto_mode:
    # æ‰‹å‹•å…¥åŠ›ï¼ˆãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ï¼‰
    col1, col2 = st.columns(2)
    with col1:
        buffett_jp = st.number_input("æ—¥æœ¬ï¼ˆ%ï¼‰", value=120.0)
        st.link_button("ğŸ“Š é–‹ã", "https://nikkeiyosoku.com/buffett/")
    with col2:
        buffett_us = st.number_input("ç±³å›½ï¼ˆ%ï¼‰", value=180.0)
        st.link_button("ğŸ“Š é–‹ã", "https://nikkeiyosoku.com/buffett_us/")

# å¹³å‡è¨ˆç®—ã¨åˆ¤å®š
buffett_avg = (buffett_jp + buffett_us) / 2
st.metric("å¹³å‡", f"{buffett_avg:.1f}%", "âœ…" if buffett_avg < 80 else "âŒ")
```

---

## âš ï¸ æ³¨æ„äº‹é …

### å€«ç†çš„ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³

1. **ã‚¢ã‚¯ã‚»ã‚¹é »åº¦**: æœˆ1å›ã®ã¿ï¼ˆ14æ—¥10:00ï¼‰
2. **User-Agent**: é©åˆ‡ã«è¨­å®šï¼ˆä¾‹: "PlanC-Investment-Bot/1.0"ï¼‰
3. **ã‚¨ãƒ©ãƒ¼æ™‚**: å³åº§ã«ãƒªãƒˆãƒ©ã‚¤ã›ãšã€æ‰‹å‹•å…¥åŠ›ã«ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
4. **å•†ç”¨åˆ©ç”¨**: ç¦æ­¢ï¼ˆå€‹äººåˆ©ç”¨ã®ã¿ï¼‰

### æŠ€è¡“çš„ãƒªã‚¹ã‚¯

1. **ã‚µã‚¤ãƒˆæ§‹é€ å¤‰æ›´**: flux-cdn.comã®URLå¤‰æ›´ã§ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ‘ãƒ¼ãŒå‹•ä½œã—ãªããªã‚‹å¯èƒ½æ€§
2. **JavaScriptå¤‰æ›´**: ãƒ‡ãƒ¼ã‚¿å–å¾—ãƒ­ã‚¸ãƒƒã‚¯å¤‰æ›´ã§æ­£è¦è¡¨ç¾ãƒãƒƒãƒå¤±æ•—
3. **IPåˆ¶é™**: å°†æ¥çš„ã«ã‚¢ã‚¯ã‚»ã‚¹åˆ¶é™ãŒè¿½åŠ ã•ã‚Œã‚‹å¯èƒ½æ€§

### ãƒªã‚¹ã‚¯è»½æ¸›ç­–

```python
# buffett_scraper.pyï¼ˆæ”¹å–„ç‰ˆï¼‰

import time
import random

def get_buffett_index(url, country="Japan", max_retries=3):
    for attempt in range(max_retries):
        try:
            with sync_playwright() as p:
                browser = p.chromium.launch(headless=True)
                
                # User-Agentè¨­å®š
                context = browser.new_context(
                    user_agent="PlanC-Investment-Bot/1.0 (Personal Use; Monthly Check)"
                )
                page = context.new_page()
                
                # ãƒ©ãƒ³ãƒ€ãƒ é…å»¶ï¼ˆ1-3ç§’ï¼‰
                time.sleep(random.uniform(1, 3))
                
                page.goto(url, wait_until="networkidle", timeout=30000)
                content = page.content()
                
                # æ­£è¦è¡¨ç¾ã§æŠ½å‡º
                pattern = r'ãƒãƒ•ã‚§ãƒƒãƒˆæŒ‡æ•°\([^)]+\)\s*([\d.]+)'
                match = re.search(pattern, content)
                
                browser.close()
                
                if match:
                    return float(match.group(1))
                else:
                    raise ValueError("Pattern not found")
                    
        except Exception as e:
            print(f"Attempt {attempt + 1} failed: {e}")
            if attempt < max_retries - 1:
                time.sleep(5)  # 5ç§’å¾…æ©Ÿã—ã¦ãƒªãƒˆãƒ©ã‚¤
            else:
                raise
```

---

## ğŸ“‹ å®Ÿè£…ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

### Phase 1: æ‰‹å‹•å…¥åŠ›ï¼ˆä»Šæ—¥ï¼‰

```
â–¡ Streamlitã‚¢ãƒ—ãƒªä½œæˆ
â–¡ ãƒãƒ•ã‚§ãƒƒãƒˆæŒ‡æ•°ã®æ‰‹å‹•å…¥åŠ›ãƒ•ã‚©ãƒ¼ãƒ 
â–¡ åˆ¤å®šãƒ­ã‚¸ãƒƒã‚¯
â–¡ è¨˜éŒ²æ©Ÿèƒ½
â–¡ å‹•ä½œç¢ºèª
```

### Phase 2: Playwrightè‡ªå‹•åŒ–ï¼ˆ3ãƒ¶æœˆå¾Œï¼‰

```
â–¡ Playwrightã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
â–¡ buffett_scraper.pyä½œæˆ
â–¡ æ­£è¦è¡¨ç¾ãƒ‘ã‚¿ãƒ¼ãƒ³ç¢ºèª
â–¡ ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°å®Ÿè£…
â–¡ User-Agentè¨­å®š
â–¡ ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯æ©Ÿèƒ½ï¼ˆæ‰‹å‹•å…¥åŠ›ï¼‰
â–¡ å‹•ä½œãƒ†ã‚¹ãƒˆï¼ˆ10å›ä»¥ä¸Šï¼‰
â–¡ GitHub Actionsè¨­å®š
â–¡ æœˆæ¬¡è‡ªå‹•å®Ÿè¡Œãƒ†ã‚¹ãƒˆ
```

---

## ğŸš€ ä»Šã™ãå®Ÿè£…ï¼ˆPhase 1ï¼‰

### 1åˆ†ã§å‹•ã‹ã™

```bash
# 1. ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
pip install streamlit yfinance pandas

# 2. ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆï¼ˆæ‰‹å‹•å…¥åŠ›ç‰ˆï¼‰
# ä¸Šè¨˜ã®plan_c_app.pyã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼

# 3. å®Ÿè¡Œ
streamlit run plan_c_app.py

# 4. ãƒ–ãƒ©ã‚¦ã‚¶ã§ç¢ºèª
# http://localhost:8501
```

---

## ğŸ“ ã¾ã¨ã‚

### ãƒãƒ•ã‚§ãƒƒãƒˆæŒ‡æ•°è‡ªå‹•å–å¾—ã®å›ç­”

**æŠ€è¡“çš„ã«ã¯å¯èƒ½ã§ã™**ãŒã€ä»¥ä¸‹ã®ç†ç”±ã§**Phase 1ï¼ˆæ‰‹å‹•å…¥åŠ›ï¼‰ã‹ã‚‰é–‹å§‹**ã‚’å¼·ãæ¨å¥¨ï¼š

| åˆ¤æ–­è¦ç´  | è©•ä¾¡ | ç†ç”± |
|---------|------|------|
| **robots.txt** | âœ… è¨±å¯ | ä¸€èˆ¬ãƒœãƒƒãƒˆã¯åˆ¶é™ãªã— |
| **æŠ€è¡“çš„å®Ÿè£…** | âœ… å¯èƒ½ | Playwrightã§å®Ÿè£…å¯èƒ½ |
| **å®‰å®šæ€§** | âš ï¸ ä¸­ç¨‹åº¦ | ã‚µã‚¤ãƒˆæ§‹é€ å¤‰æ›´ã®ãƒªã‚¹ã‚¯ |
| **å€«ç†æ€§** | âœ… è¨±å®¹ | æœˆ1å›ãƒ»ä½è² è· |
| **å¿…è¦æ€§** | âš ï¸ ä½ã„ | æ‰‹å‹•1åˆ† vs å®Ÿè£…3æ™‚é–“ |

### æ¨å¥¨å®Ÿè£…é †åº

1. **ä»Šæ—¥**: Phase 1ï¼ˆæ‰‹å‹•å…¥åŠ›ï¼‰ - 0åˆ†ã§é–‹å§‹ã€1åˆ†/æœˆã®ä½œæ¥­
2. **3ãƒ¶æœˆå¾Œ**: Phase 2ï¼ˆPlaywrightè‡ªå‹•åŒ–ï¼‰ - æ‰‹å‹•ã«æ…£ã‚Œã¦ã‹ã‚‰æ¤œè¨
3. **Phase 3ã¯éæ¨å¥¨**: FRED APIã¯2020å¹´ã¾ã§ã®ãƒ‡ãƒ¼ã‚¿ã§ä½¿ç”¨ä¸å¯

---

**çµè«–**: URLã‚’æç¤ºã„ãŸã ã„ãŸnikkeiäºˆæ¸¬.comã‹ã‚‰Playwrightã§è‡ªå‹•å–å¾—ã¯**æŠ€è¡“çš„ãƒ»å€«ç†çš„ã«å¯èƒ½**ã§ã™ã€‚ãŸã ã—ã€**Phase 1ï¼ˆæ‰‹å‹•å…¥åŠ›ï¼‰ã‚’3ãƒ¶æœˆè©¦ã—ã¦ã‹ã‚‰è‡ªå‹•åŒ–ã‚’æ¤œè¨**ã™ã‚‹ã“ã¨ã‚’å¼·ãæ¨å¥¨ã—ã¾ã™ã€‚ç†ç”±ã¯ã€æ‰‹å‹•ã§ã‚‚æœˆ1åˆ†ã§æ¸ˆã¿ã€100%ç¢ºå®Ÿã ã‹ã‚‰ã§ã™ã€‚
